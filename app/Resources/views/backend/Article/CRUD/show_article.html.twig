{% extends 'SonataAdminBundle:CRUD:base_show.html.twig' %}

{% import _self as forms %}

{% macro table(object) %}
    <table class="table table-striped table-responsive">
        <tbody>
            <tr>
                <th>Reviewer</th>
                <td>{{ object.reviewer }}</td>
            </tr>
            <tr>
                <th>Status</th>
                <td>{{ object.state }}</td>
            </tr>
            <tr>
                <th>Created at</th>
                <td>{{ object.createAt | date("d/m/y") }}</td>
            </tr>
            <tr>
                <th>Comment</th>
                <td>{{ object.comment }}</td>
            </tr>
        </tbody>
    </table>
{% endmacro %}

{% block show %}
  {{ parent() }}

    <div class="box box-primary">
        <div class="box-header with-border">
            <h4 class="box-title">Reviews</h4>
        </div>
        <div class="box-body table-responsive no-padding">

            {% for articlereview in object.articleReviews %}

                <div class="row">
                    <div class="col-md-12">Download Article:
                        <td>
                            <a class="btn-sm btn-default glyphicon glyphicon-download-alt " href="{{ path('file_download',{'id': articlereview.id }) }}" role="button"></a>
                        </td>

                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">State:
                        <td>{{ articlereview.state }}</td>
                    </div>
                </div>

                {% for comment in articlereview.reviewComments %}
                    <div id="content">
                        <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
                            <li><a href="#{{ loop.index }}" data-toggle="tab">Version {{ loop.index }}</a></li>
                        </ul>
                        <div id="my-tab-content" class="tab-content">
                            <div class="tab-pane" id="{{ loop.index }}">
                                {{ forms.table(comment) }}
                            </div>
                        </div>
                    </div>
                {% endfor %}

                <div class="row">
                    <div class="col-md-12">
                        <div class="btn-group">
                            <a class="btn btn-default" href="{{ path("admin_app_articlereview_accepted", {'id': object.id}) }}">Accept</a>
                            <a class="btn btn-default" href="{{ path("admin_app_articlereview_accepted with suggestions", {'id': object.id}) }}">Accept with suggerences</a>
                            <a class="btn btn-default" href="{{ path("admin_app_articlereview_rejected", {'id': object.id}) }}">Reject</a>
                        </div>
                    </div>
                </div>

            {% endfor %}
        </div>
    </div>


{% endblock %}

        {#<a class="btn btn-default glyphicon glyphicon-file" href="{{ path('admin_app_article_edit',{'id': object.id } ) }}"#}
                                    {#role="button"> State End</a>#}

